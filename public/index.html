<!DOCTYPE html>
<html>
<head>
  <title>Test primus</title>
</head>
<body>

</body>
  <!-- The client is automatically served by primus. -->
  <script src="/primus/primus.js"></script>
  <script>
    // var primus = new Primus('http://localhost:8080/?query=string');
    var primus = new Primus();

    primus.write('you can write directly, we will queue it');
    primus.write('until the open event is called and flush it');

    primus.on('reconnect', function () {
      console.log('primus: reconnect event happend');
    });
    primus.on('open', function () {
      console.log('primus: connection established');
      primus.write('hello world');
    });
    primus.on('error', function (err) {
      console.log('primus: error event', err);
    });
    primus.on('data', function (data) {
      console.log('primus: received data', data);
    });
    primus.on('end', function () {
      console.log('primus: connection closed');
    });

    setInterval(function () {
      primus.write({ ping: 'Pong' });
    }, 3000);
  </script>
</html>
